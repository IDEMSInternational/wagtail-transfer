



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Settings Reference - Wagtail Transfer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#settings" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Wagtail Transfer Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon">import_export</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Wagtail Transfer Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Settings Reference
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Wagtail Transfer Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">import_export</i>
      
    </a>
    Wagtail Transfer Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../basic_usage/" title="Basic Usage" class="md-nav__link">
      Basic Usage
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../how_it_works/" title="How It Works" class="md-nav__link">
      How It Works
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Settings Reference
      </label>
    
    <a href="./" title="Settings Reference" class="md-nav__link md-nav__link--active">
      Settings Reference
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wagtailtransfer_secret_key" class="md-nav__link">
    WAGTAILTRANSFER_SECRET_KEY
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wagtailtransfer_sources" class="md-nav__link">
    WAGTAILTRANSFER_SOURCES
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wagtailtransfer_update_related_models" class="md-nav__link">
    WAGTAILTRANSFER_UPDATE_RELATED_MODELS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wagtailtransfer_lookup_fields" class="md-nav__link">
    WAGTAILTRANSFER_LOOKUP_FIELDS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wagtailtransfer_no_follow_models" class="md-nav__link">
    WAGTAILTRANSFER_NO_FOLLOW_MODELS
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wagtailtransfer_secret_key" class="md-nav__link">
    WAGTAILTRANSFER_SECRET_KEY
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wagtailtransfer_sources" class="md-nav__link">
    WAGTAILTRANSFER_SOURCES
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wagtailtransfer_update_related_models" class="md-nav__link">
    WAGTAILTRANSFER_UPDATE_RELATED_MODELS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wagtailtransfer_lookup_fields" class="md-nav__link">
    WAGTAILTRANSFER_LOOKUP_FIELDS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wagtailtransfer_no_follow_models" class="md-nav__link">
    WAGTAILTRANSFER_NO_FOLLOW_MODELS
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="settings">Settings</h1>
<h3 id="wagtailtransfer_secret_key"><code>WAGTAILTRANSFER_SECRET_KEY</code></h3>
<div class="codehilite"><pre><span></span><span class="n">WAGTAILTRANSFER_SECRET_KEY</span> <span class="o">=</span> <span class="s1">&#39;7cd5de8229be75e1e0c2af8abc2ada7e&#39;</span>
</pre></div>


<p>The secret key used to authenticate requests to import content from this site to another. The secret key in the 
matching part of the importing site's <code>WAGTAILTRANSFER_SOURCES</code> must be identical, or the transfer will be rejected - 
this prevents unauthorised import of sensitive data. </p>
<h3 id="wagtailtransfer_sources"><code>WAGTAILTRANSFER_SOURCES</code></h3>
<div class="codehilite"><pre><span></span><span class="n">WAGTAILTRANSFER_SOURCES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;staging&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BASE_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://staging.example.com/wagtail-transfer/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">:</span> <span class="s1">&#39;4ac4822149691395773b2a8942e1a472&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s1">&#39;production&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BASE_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://www.example.com/wagtail-transfer/&#39;</span><span class="p">,</span>
        <span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">:</span> <span class="s1">&#39;a36476ffc6af34dc935570d97369eca0&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>


<p>A dictionary defining the sites available to import from, and their secret keys.</p>
<h3 id="wagtailtransfer_update_related_models"><code>WAGTAILTRANSFER_UPDATE_RELATED_MODELS</code></h3>
<div class="codehilite"><pre><span></span><span class="n">WAGTAILTRANSFER_UPDATE_RELATED_MODELS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wagtailimages.image&#39;</span><span class="p">,</span> <span class="s1">&#39;adverts.advert&#39;</span><span class="p">]</span>
</pre></div>


<p>Specifies a list of models that, whenever we encounter references to them in imported content, should be updated to the 
latest version from the source site as part of the import.</p>
<p>Whenever an object being imported contains a reference to a related object (through a ForeignKey, RichTextField or 
StreamField), the 'importance' of that related object will tend to vary according to its type. For example, a reference 
to an Image object within a page usually means that the image will be shown on that page; in this case, the Image model 
is sufficiently important to the imported page that we want the importer to not only ensure that image exists at the 
destination, but is updated to its newest version as well. Contrast this with the example of an 'author' snippet 
attached to blog posts, containing various fields of data about that person (e.g. bio, social media links); in this 
case, the author information is not really part of the blog post, and it's not expected that we would update it when 
running an import of blog posts.</p>
<h3 id="wagtailtransfer_lookup_fields"><code>WAGTAILTRANSFER_LOOKUP_FIELDS</code></h3>
<div class="codehilite"><pre><span></span><span class="n">WAGTAILTRANSFER_LOOKUP_FIELDS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;blog.author&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">]}</span>
</pre></div>


<p>Specifies a list of fields to use for object lookups on the given models.</p>
<p>Normally, imported objects will be assigned a random UUID known across all sites, so that those objects can be 
recognised on subsequent imports and be updated rather than creating a duplicate. This behaviour is less useful for 
models that already have a uniquely identifying field, or set of fields, such as an author identified by first name 
and surname - if the same author exists on the source and destination site, but this was not the result of a previous 
import, then the UUID-based matching will consider them distinct, and attempt to create a duplicate author record at the 
destination. Adding an entry in WAGTAILTRANSFER_LOOKUP_FIELDS will mean that any imported instances of the given model 
will be looked up based on the specified fields, rather than by UUID.</p>
<h3 id="wagtailtransfer_no_follow_models"><code>WAGTAILTRANSFER_NO_FOLLOW_MODELS</code></h3>
<div class="codehilite"><pre><span></span><span class="n">WAGTAILTRANSFER_NO_FOLLOW_MODELS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wagtailcore.page&#39;</span><span class="p">,</span> <span class="s1">&#39;organisations.Company&#39;</span><span class="p">]</span>
</pre></div>


<p>Specifies a list of models that should not be imported by association when they are referenced from imported content. 
Defaults to <code>['wagtailcore.page']</code>.</p>
<p>By default, objects referenced within imported content will be recursively imported to ensure that those references are 
still valid on the destination site. However, this is not always desirable - for example, if this happened for the Page 
model, this would imply that any pages linked from an imported page would get imported as well, along with any pages 
linked from those pages, and so on, leading to an unpredictable number of extra pages being added anywhere in the page 
tree as a side-effect of the import. Models listed in WAGTAILTRANSFER_NO_FOLLOW_MODELS will thus be skipped in this 
process, leaving the reference unresolved. The effect this has on the referencing page will vary according to the kind 
of relation: nullable foreign keys, one-to-many and many-to-many relations will simply omit the missing object; 
references in rich text and StreamField will become broken links (just as linking a page and then deleting it would); 
while non-nullable foreign keys will prevent the object from being created at all (meaning that any objects referencing 
that object will end up with unresolved references, to be handled by the same set of rules).</p>
<p>Note that these settings do not accept models that are defined as subclasses through multi-table inheritance - in 
particular, they cannot be used to define behaviour that only applies to specific subclasses of Page.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../how_it_works/" title="How It Works" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How It Works
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>